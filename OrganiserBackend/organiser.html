
<!doctype html>

<html lang="en" ng-app="project">
<head>
  <meta charset="utf-8">

  <title>TMS Polling - Admin Panel</title>
  <meta name="description" content="TMS Polling - Admin Panel">
  <meta name="author" content="Aditya Raju">

  <link rel="stylesheet/less" type="text/css" href="organiser.less">
  

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.3.0/css/foundation.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>
  <script type="text/javascript" src="organiser.js"></script>

</head>

<body>
	<div class="row">
		<div class="large-12 columns">
			<div><h3>Organiser Panel</h3></div>
		</div>
	</div>
	<div class="row" ng-controller="LoginController">
		<div ng-hide="loginStatus">
			<div class="large-5 columns">
				<input type="text" id="username" ng-model="user.username" placeholder="Organiser Name"></input>
			</div>
			<div class="large-5 columns">
				<input type="password" id="password" ng-model="user.password" placeholder="Password"></input>
			</div>
			<div class="large-2 columns">
				<button type="button" class="button success expanded" ng-click="handleLogin()">Log In</button>
			</div>
			<div>{{user}}</div>
		</div>
		<div ng-hide="!loginStatus">
			<div class="large-5 columns" ng-show="!oldPasswordMatch">
				<input type="password" id="password_reset" ng-model="password.old" placeholder="Enter old Password">
			</div>
			<div class="large-2 columns" ng-show="!oldPasswordMatch">
				<button type="button" class="button success expanded" ng-click="checkReset()">Reset Password</button>
			</div>
			<div class="large-5 columns" ng-show="oldPasswordMatch">
				<input type="password" id="new_password" ng-model="password.new" placeholder="Enter new Password">
			</div>
			<div class="large-2 columns" ng-show="oldPasswordMatch">
				<button type="button" class="button warning expanded" ng-click="handleReset()">Confirm Reset</button>
			</div>
			<div class="large-2 columns" ng-show="oldPasswordMatch">
				<button type="button" class="button success expanded" ng-click="revertReset()">Cancel</button>
			</div>
			<div class="large-3 columns" ng-show="!oldPasswordMatch">
			</div>
			<div class="large-1 columns" ng-show="oldPasswordMatch">
			</div>
			<div class="large-2 columns">
				<button type="button" class="button success expanded" ng-click="handleLogout()">Log Out</button>
			</div>
		</div>
	</div>
	<div class="row" ng-controller="VoterList" ng-show="loginStatus">
		<div>
			<div class="large-12 columns">
				<div class="header">
					<h4>Unregistered Voters</h4>
				</div>
				<div class="callout secondary" ng-repeat="unregVoter in unregVoters track by $index">
					<span class="voterNameSpan"><b>{{unregVoter.name}}</b></span><span class="label primary voterNameSpan">{{unregVoter.nric}}</span><span class="label secondary">{{unregVoter.shares}}</span>
					<button class="close-button tickButton" type="button" ng-click="handleRegister(unregVoter)" >
						<i class="fa fa-check" aria-hidden="true"></i>
					</button>
					<button class="close-button" type="button" ng-click="handleDelete(unregVoter)">
						<i class="fa fa-times" aria-hidden="true"></i>
					</button>
				</div>
				<div class="callout success" ng-show="!unregVoters.length">
					All Voters Registered!
				</div>
				<div class="header">
					<h4>Registered Voters</h4>
				</div>
				<div class="callout secondary" ng-repeat="regVoter in regVoters track by $index">
					<span class="voterNameSpan"><b>{{regVoter.name}}</b></span><span class="label primary voterNameSpan">{{regVoter.nric}}</span><span class="label secondary">{{regVoter.shares}}</span>
					<button class="close-button" type="button" ng-click="handleDelete(unregVoter)">
						<i class="fa fa-times" aria-hidden="true"></i>
					</button>
				</div>
				<div class="callout warning" ng-show="!regVoters.length">
					No Registered Voters!
				</div>
				
			</div>
		</div>
	</div>
	<div ng-controller="EventList" ng-show="loginStatus">
		<div class="row">
			<div class="large-12 columns">
				<div class="header">
					<h4>Events</h4>
				</div>
			</div>
		</div>
		<div>
			<div ng-repeat="row in events" class="row">
				<div class="large-6 columns" ng-repeat="event in row">
					<div class="callout secondary">
						<h5>{{event.name}} </h5>

						<div class="row">
							<div class="medium-1 columns">
								<button class="button success tiny ">Start</button>
							</div>
							<div class="medium-1 columns">
								<span class="label primary">Voters: {{event.voters.length}}</span>
							</div>
							<div class="medium-10 columns">
							</div>
						</div>
						
						<div ng-repeat="question in event.question">
							{{question}}
						</div>
						<div>	
							<div class="row">
								<div class="medium-10 columns">
									<input type="text" placeholder="Add question" ng-model="question.prompt">
								</div>
								<div class="medium-2 columns">
									<button type="button" class="hollow button success expanded" ng-click="addQuestion(question)">
										<i class="fa fa-plus" aria-hidden="true"></i>
									</button>
								</div>
							</div>
							<div class="row" ng-repeat="row in choices">
								<div class="medium-5 columns" ng-repeat="choice in row track by $index">
									<input type="text" placeholder="Choice {{$index + 1}}">
								</div>
								<div class="medium-2 columns">
									<button type="button" class="hollow button secondary expanded" ng-click="addChoice(question.choice)">
										<i class="fa fa-plus" aria-hidden="true"></i>
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</div>
</body>

</html>